pkgname=base-config
pkgver=0
pkgrel=3
pkgdesc='Base services and configuration'
arch=('x86_64')
url="https://github.com/ricardoalcaraz/ricardoalcaraz.dev"
source=("10-pacman.conf" "notifyme.sh" "backup-uploads.path" "backup-uploads.service")
depends=('dotnet-runtime' 'aspnet-runtime' 'wol' 'htop' 'vim')
makedepends=('dotnet-sdk')
b2sums=('SKIP' 'SKIP' 'SKIP' 'SKIP')
backup=('etc/pacman.d/mirrorlist' 'etc/pacman.conf')

build() {
  cd $srcdir
  ls
  pwd
}


package() {
  #reflector -n 6 -l 6 --score 6 -f 6 -c US --threads 4 >> /etc/pacmand.d/mirrorlist
  install -D -m644 10-pacman.conf $pkgdir/etc/pacman.conf.d/10-pacman.conf
  #echo '[ricardoalcaraz.dev]\nServer = https://ricardoalcaraz.dev/archlinux/$repo' >> $pkgdir/etc/pacman.conf.d/10-Pacman.NET.conf
# echo 'aur-builder 1000 "Pacman.NET dedicated user"' > /etc/
  install -D -m644 backup-uploads.path $pkgdir/usr/lib/systemd/system/backup-uploads.path
  install -D -m644 backup-uploads.service $pkgdir/usr/lib/systemd/system/backup-uploads.service
# m Pacman.NET http -
  #install backup services
  install -D -m555 notifyme.sh $pkgdir/usr/bin/notifyme
  mkdir -p $pkgdir/var/log/ 
  touch $pkgdir/var/log/ups-events.log
  chmod 666 $pkgdir/var/log/ups-events.log
  #install -D -m554 backup.sh "${pkgdir}/usr/bin/full-backup"
  #install "${pkgdir}/usr/lib/systemd/system/full-backup.service"
  #install -g Pacman.NET -D -m660 /srv/Pacman.NET/appsettings.json
  #echo "aur-builder ALL=(ALL) NOPASSWD: /usr/bin/pacman" > $pkgdir/etc/sudoers.d/aur-builder.conf
  mkdir -p $pkgdir/srv/http/uploads
  chown root:http $pkgdir/srv/http/uploads
  chmod -R 777 $pkgdir/srv/http/uploads
}
